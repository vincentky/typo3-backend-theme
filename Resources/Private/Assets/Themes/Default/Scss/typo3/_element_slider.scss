//
// Bootstrap Slider
//
// This is a custom less implementation for the value slider in the backend
// based on https://github.com/seiyria/bootstrap-slider
//
// Please be careful on lib updates.
//

//
// Slider Variables
//
$slider-track-bg: #ddd;
$slider-selection-bg: #999;
$slider-border-radius: $border-radius-base;
$slider-handle-color: $btn-default-color;
$slider-handle-bg: $btn-default-bg;
$slider-handle-border: darken($btn-default-border, 15%);
$slider-handle-border-radius: $slider-border-radius;
$slider-disabled-handle-color: $btn-danger-color;
$slider-disabled-handle-bg: $btn-danger-bg;
$slider-disabled-handle-border: darken($btn-danger-border, 15%);
$slider-horizontal-width: 210px;
$slider-horizontal-height: $input-height-base;
$slider-horizontal-handle-height: ceil($slider-horizontal-height * 0.6);
$slider-horizontal-handle-width: ceil($slider-horizontal-height * 0.5);
$slider-vertical-width: $input-height-base;
$slider-vertical-height: 210px;
$slider-vertical-handle-height: ceil($slider-vertical-width * 0.5);
$slider-vertical-handle-width: ceil($slider-vertical-width * 0.6);

//
// Slider
//
.slider {
    display: inline-block;
    position: relative;

    input {
        display: none;
    }

    .tooltip {
        &.top {
            margin-top: -36px;
        }
    }

    .tooltip-inner {
        white-space: nowrap;
    }

    .hide {
        display: none;
    }
}

.form-wizards-items {
    > .slider {
        &.slider-horizontal {
            margin-left: $slider-horizontal-height * 0.5 / 2;
            margin-right: $slider-horizontal-height * 0.5 / 2;
        }
    }
}

//
// Slider track
//
.slider-track {
    position: absolute;
    cursor: pointer;
    background-color: $slider-track-bg;
    border-radius: $slider-border-radius;

    @include box-shadow(inset 0 0 2px rgba(0, 0, 0, 0.25));
}

.slider-track-low,
.slider-track-high {
    position: absolute;
    background: transparent;

    @include box-sizing(border-box);

    border-radius: $slider-border-radius;
}

//
// Slider handle
//
.slider-handle {
    position: absolute;
    background-color: $slider-handle-bg;
    border: 1px solid $slider-handle-border;
    border-radius: $slider-handle-border-radius;
    height: $slider-horizontal-handle-height;
    width: $slider-horizontal-handle-width;
    margin-top: -($slider-horizontal-handle-height / 2 - $slider-horizontal-track-height / 2);
    cursor: grab;

    @include box-shadow(0 1px 0 rgba(0, 0, 0, 0.15));
     * Since we can't utilize ::before and ::after, we'll hack the visual drag handle with background gradients and box shadows
     * (Except Edge, of course).
     */
    @include box-shadow(inset 0 calc(#{$slider-horizontal-handle-height} / 4 * -1) 0 0 $slider-handle-bg, inset 0 calc(#{$slider-horizontal-handle-height} / 4) 0 0 $slider-handle-bg);

    @include box-sizing(border-box);
    background-image: linear-gradient(90deg, $slider-handle-bg 30%, $slider-handle-color 30%, $slider-handle-color 40%, $slider-handle-bg 40%, $slider-handle-bg 60%, $slider-handle-color 60%, $slider-handle-color 70%, $slider-handle-bg 70%, $slider-handle-bg);

    &:hover,
    &:focus,
    &:active {
        background-color: darken($slider-handle-bg, 10%);
        border-color: darken($slider-handle-border, 12%);
    }

    &:before,
    &:after {
        content: "";
        display: block;
        position: absolute;
        background-color: $slider-handle-color;
    }
}

//
// Slider selection
//
.slider-selection {
    position: absolute;
    background-color: $slider-selection-bg;
    border-radius: $slider-border-radius;

    @include box-shadow(inset 0 0 2px rgba(0, 0, 0, 0.25));
}

//
// Slider tick
//
.slider-tick {
    position: absolute;
    background-color: darken($slider-track-bg, 10%);

    &.in-selection {
        background-color: darken($slider-selection-bg, 10%);
    }
}

//
// Slider horizontal
//
.slider-horizontal {
    width: $slider-horizontal-width;
    height: $slider-horizontal-height;

    .slider-selection,
    .slider-track-low,
    .slider-track-high {
        height: 100%;
        top: 0;
        bottom: 0;
    }

    .slider-track {
        top: 50%;
        left: 0;
        margin-top: -$slider-horizontal-height / 4;
        height: $slider-horizontal-height / 2;
        width: 100%;
    }

    .slider-tick {
        height: $slider-horizontal-height / 2;
        width: 1px;

        &[style="left: 0%;"],
        &[style="left: 100%;"] {
            display: none;
        }
    }

    .slider-handle {
        top: 50%;
        height: $slider-horizontal-handle-height;
        width: $slider-horizontal-handle-width;
        margin-top: -$slider-horizontal-handle-height / 2;
        margin-left: -$slider-horizontal-handle-width / 2;

        &:before,
        &:after {
            height: 50%;
            width: 2px;
            top: 25%;
        }

        &:before {
            left: $slider-horizontal-handle-width / 4;
        }

        &:after {
            right: $slider-horizontal-handle-width / 4;
        }
    }
}

//
// Slider vertical
//
.slider-vertical {
    width: $slider-vertical-width;
    height: $slider-vertical-height;

    .slider-selection,
    .slider-track-low,
    .slider-track-high {
        width: 100%;
        left: 0;
        right: 0;
    }

    .slider-selection {
        bottom: 0;
    }

    .slider-track {
        top: 0;
        left: 50%;
        margin-left: -$slider-vertical-width / 4;
        height: 100%;
        width: $slider-vertical-width / 2;
    }

    .slider-tick {
        height: 1px;
        width: $slider-vertical-width / 2;

        &[style="top: 0%;"],
        &[style="top: 100%;"] {
            display: none;
        }
    }

    .slider-handle {
        left: 50%;
        height: $slider-vertical-handle-height;
        width: $slider-vertical-handle-width;
        margin-top: -$slider-vertical-handle-height / 2;
        margin-left: -$slider-vertical-handle-width / 2;

        &:before,
        &:after {
            height: 2px;
            width: 50%;
            left: 25%;
        }

        &:before {
            top: $slider-vertical-handle-height / 4;
        }

        &:after {
            bottom: $slider-vertical-handle-height / 4;
        }
    }

    .slider-selection {
        left: 0;
        right: 0;
    }
}

//
// Slider disabled
//
.slider-disabled {
    .slider-handle {
        background-color: $slider-disabled-handle-bg;
        border: 1px solid $slider-disabled-handle-border;

        &:hover,
        &:focus,
        &:active {
            background-color: darken($slider-disabled-handle-bg, 10%);
            border-color: darken($slider-disabled-handle-border, 12%);
        }

        &:before,
        &:after {
            background-color: $slider-disabled-handle-color;
        }
    }

    .slider-track {
    height: $slider-horizontal-track-height;
    background: $slider-track-bg;
    border-radius: $slider-border-radius;

    @include box-shadow(inset 0 0 2px rgba(0, 0, 0, 0.25));
    @include box-sizing(border-box);
}

@mixin slider-track-disabled() {
        cursor: not-allowed;
}

//
// Slider
//
input[type=range].slider {
    appearance: none;
    outline: none;
    display: inline-block;
    position: relative;
    width: $slider-horizontal-width;
    height: $slider-horizontal-height;
    background: transparent;
    margin: 0 $padding-base-horizontal;

    &::-webkit-slider-thumb {
        margin-top: $slider-horizontal-handle-height;

        @include slider-thumb();
    }

    &::-webkit-slider-runnable-track {
        @include slider-track();
    }

    &::-moz-range-thumb {
        @include slider-thumb();
    }

    &::-moz-range-track {
        @include slider-track();

        width: 100%;
    }

    &::-moz-range-progress {
        background: $slider-selection-bg;
    }

    &::-ms-thumb {
        @include slider-thumb();

        margin-top: inherit;
    }

    &::-ms-track {
        @include slider-track();
    }

    &::-ms-fill-lower {
        background: $slider-selection-bg;
        border-radius: $slider-border-radius;

        @include box-sizing(border-box);
    }

    &::-ms-fill-upper {
        background: transparent;
        border-radius: $slider-border-radius;

        @include box-sizing(border-box);
    }

    &[disabled] {
        &::-webkit-slider-thumb {
            @include slider-thumb-disabled();
        }

        &::-webkit-slider-runnable-track {
            @include slider-track-disabled();
        }

        &::-moz-range-thumb {
            @include slider-thumb-disabled();
        }

        &::-moz-range-track {
            @include slider-track-disabled();
        }

        &::-ms-thumb {
            @include slider-thumb-disabled();
        }

        &::-ms-track {
            @include slider-track-disabled();
        }
    }
}

.form-wizards-items {
    > input[type=range].slider {
        &.slider-horizontal {
            margin-left: $slider-horizontal-height * 0.5 / 2;
            margin-right: $slider-horizontal-height * 0.5 / 2;
        }
    }
}

.slider-wrapper {
    display: flex;
    align-items: center;

    &.slider-vertical {
        width: auto;
        margin-bottom: calc(100% - #{$slider-vertical-width});
        transform-origin: top left;
        transform: rotate(-90deg) translate(-100%);

        .slider {
            margin: $padding-base-vertical 0;
        }
    }
}
